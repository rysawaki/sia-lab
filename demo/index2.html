<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>SIA Dual-View: Final Build</title>
<style>
body{font-family:'Segoe UI',monospace;background:#121212;color:#ccc;display:flex;flex-direction:column;align-items:center;margin:0;padding:20px;touch-action:none}h1{margin:10px 0 5px;font-weight:300;letter-spacing:2px;color:#00d4ff;font-size:1.5rem;text-align:center}.subtitle{font-size:0.8rem;color:#777;margin-bottom:15px;text-align:center}#container{display:flex;gap:15px;flex-wrap:wrap;justify-content:center}.panel{position:relative;border:1px solid #333;border-radius:4px;overflow:hidden;background:#000}canvas{display:block;cursor:crosshair;width:350px;height:350px}.label{position:absolute;top:10px;left:10px;padding:4px 8px;font-size:0.8rem;color:#fff;background:rgba(0,0,0,0.7);border-left:3px solid;pointer-events:none}.lbl-world{border-color:#888}.lbl-mind{border-color:#00d4ff}.narrative-box{position:absolute;bottom:10px;left:10px;right:10px;padding:8px 12px;background:rgba(0,0,0,0.85);border-left:4px solid #555;font-family:'Consolas',monospace;font-size:0.8rem;color:#eee;pointer-events:none;transition:border-color 0.2s}.controls{margin-top:15px;display:flex;gap:15px;background:#1e1e24;padding:10px;border-radius:8px}button{padding:10px 20px;background:#333;color:#ddd;border:1px solid #444;cursor:pointer;border-radius:4px;font-size:1rem}button:hover{background:#444;color:#fff}.legend{margin-top:10px;font-size:0.8rem;display:flex;gap:15px;flex-wrap:wrap;justify-content:center}.vec-label{font-weight:bold}
</style>
</head>
<body>
<h1>SIA: DUAL REALITY</h1>
<div class="subtitle">World (Events) vs Mind (Meaning + Narrative)</div>
<div id="container">
<div class="panel"><div class="label lbl-world">WORLD (Reality)</div><canvas id="cvWorld" width="700" height="700"></canvas></div>
<div class="panel"><div class="label lbl-mind">MIND (Internal Map)</div><canvas id="cvMind" width="700" height="700"></canvas><div id="nD" class="narrative-box">SYSTEM: ONLINE</div></div>
</div>
<div class="legend"><span class="vec-label" style="color:#00ff00">➤ Intent (Green)</span><span class="vec-label" style="color:#d000ff">➤ Memory (Purple)</span></div>
<div class="controls"><button onclick="rst()">Reset Memory</button><button onclick="tgl()">Pause / Resume</button></div>
<script>
/* SIA Engine v0.2 (Obfuscated/Touch) - Copyright (c) 2025 RS5309 */
const _D=0.05,_G=64,_S=700;
class _W{constructor(){this.p=[0,0];this.g=[1.2,0.5];this.s=[0.2,-0.5];this.sr=0.3;this.gr=0.15}st(v){this.p[0]+=v[0]*_D;this.p[1]+=v[1]*_D;let l=1.95;this.p[0]=Math.max(-l,Math.min(l,this.p[0]));this.p[1]=Math.max(-l,Math.min(l,this.p[1]));let h=0;if(Math.hypot(this.p[0]-this.s[0],this.p[1]-this.s[1])<this.sr)h=1;return{p:[...this.p],h}}}
class _M{constructor(){this.t=new Float32Array(_G*_G);this.i=new Float32Array(_G*_G);this.dt=0.005;this.ds=0.001;this.lr=0.5}tg(x,y){let gx=Math.floor((x+2.0)/4.0*_G),gy=Math.floor((-y+2.0)/4.0*_G);return{x:Math.max(0,Math.min(_G-1,gx)),y:Math.max(0,Math.min(_G-1,gy))}}up(p,e){let g=this.tg(p[0],p[1]);this.pt(this.t,g.x,g.y,0.2,1);if(e.h>0)this.pt(this.i,g.x,g.y,this.lr,4);for(let k=0;k<this.t.length;k++){this.t[k]*=(1-this.dt);this.i[k]*=(1-this.ds)}}pt(m,cx,cy,a,r){let r2=r*r;for(let y=cy-r;y<=cy+r;y++)for(let x=cx-r;x<=cx+r;x++)if(x>=0&&x<_G&&y>=0&&y<_G){let d2=(x-cx)**2+(y-cy)**2;if(d2<=r2)m[y*_G+x]=Math.min(1.0,m[y*_G+x]+a*Math.exp(-d2/2))}}dc(p,gv){let g=this.tg(p[0],p[1]),gi=(x,y)=>this.i[y*_G+x],xl=Math.max(0,g.x-1),xr=Math.min(_G-1,g.x+1),yu=Math.max(0,g.y-1),yd=Math.min(_G-1,g.y+1),dx=(gi(xr,g.y)-gi(xl,g.y))*0.5,dy=(gi(g.x,yd)-gi(g.x,yu))*0.5,mx=-dx*2.0,my=dy*2.0,ix=gv[0]*0.3,iy=gv[1]*0.3,nx=(Math.random()-0.5)*0.8,ny=(Math.random()-0.5)*0.8;return{v:[ix+mx+nx,iy+my+ny],vi:[ix,iy],vm:[mx,my]}}ns(p,vi,vm){let g=this.tg(p[0],p[1]),idx=g.y*_G+g.x,pl=this.i[idx],tl=this.t[idx],li=Math.hypot(vi[0],vi[1])+1e-3,lm=Math.hypot(vm[0],vm[1])+1e-3,dot=(vi[0]*vm[0]+vi[1]*vm[1])/(li*lm),t="SYSTEM: SEARCHING...",c="#aaa",b="#555";if(pl>0.4){t="⚠ DANGER DETECTED (Pain)";c="#ff5555";b="#ff0000"}else if(pl>0.1&&lm>0.1&&dot<-0.5){t="⚡ CONFLICT: WILL vs FEAR";c="#ffaa00";b="#ff8800"}else if(tl>0.6){t="∞ FLOW STATE (Habitual)";c="#d000ff";b="#aa00ff"}else if(li>0.1){t="➤ INTENT: SEEKING GOAL";c="#00ff00";b="#00ff00"}return{t,c,b}}rs(){this.t.fill(0);this.i.fill(0)}}
const cW=document.getElementById('cvWorld'),xW=cW.getContext('2d'),cM=document.getElementById('cvMind'),xM=cM.getContext('2d'),nE=document.getElementById('nD'),W=new _W,A=new _M;let P=false,LD={v:[0,0],vi:[0,0],vm:[0,0]};
const TS=(x,y)=>[(x+2)/4*_S,(-y+2)/4*_S],FS=(x,y)=>[x/_S*4-2,-(y/_S*4-2)];
function L(){if(!P){let dx=W.g[0]-W.p[0],dy=W.g[1]-W.p[1],d=Math.hypot(dx,dy),gv=d>0?[dx/d,dy/d]:[0,0];LD=A.dc(W.p,gv);let s=W.st(LD.v);A.up(s.p,s);let n=A.ns(W.p,LD.vi,LD.vm);nE.innerText=n.t;nE.style.color=n.c;nE.style.borderLeftColor=n.b}DR();requestAnimationFrame(L)}
function DA(c,x,y,vx,vy,cl,sc=120){if(Math.abs(vx)<0.01&&Math.abs(vy)<0.01)return;let tx=x+vx*sc,ty=y-vy*sc;c.beginPath();c.moveTo(x,y);c.lineTo(tx,ty);c.strokeStyle=cl;c.lineWidth=3;c.stroke();let a=Math.atan2(ty-y,tx-x);c.beginPath();c.moveTo(tx,ty);c.lineTo(tx-10*Math.cos(a-Math.PI/6),ty-10*Math.sin(a-Math.PI/6));c.lineTo(tx-10*Math.cos(a+Math.PI/6),ty-10*Math.sin(a+Math.PI/6));c.fillStyle=cl;c.fill()}
function GC(t,s){let r=0,g=Math.floor(t*150),b=Math.floor(t*255);if(s>0.01){let i=Math.min(1,s*2);r=Math.floor(255*i);g=Math.floor(g*(1-i)+200*i);b=Math.floor(b*(1-i))}return[r,g,b,255]}
function DR(){xW.fillStyle='#111';xW.fillRect(0,0,_S,_S);xW.strokeStyle='#222';xW.lineWidth=1;xW.beginPath();for(let i=0;i<=_S;i+=_S/8){xW.moveTo(i,0);xW.lineTo(i,_S);xW.moveTo(0,i);xW.lineTo(_S,i)}xW.stroke();let[gx,gy]=TS(...W.g);xW.fillStyle='#4477aa';xW.beginPath();xW.arc(gx,gy,15,0,6.28);xW.fill();let[sx,sy]=TS(...W.s);xW.fillStyle='#cc9944';xW.beginPath();xW.arc(sx,sy,15,0,6.28);xW.fill();let[ax,ay]=TS(...W.p);xW.fillStyle='#fff';xW.beginPath();xW.arc(ax,ay,8,0,6.28);xW.fill();let im=xM.createImageData(_G,_G);for(let i=0;i<_G*_G;i++){let c=GC(A.t[i],A.i[i]);im.data[i*4]=c[0];im.data[i*4+1]=c[1];im.data[i*4+2]=c[2];im.data[i*4+3]=255}let tm=document.createElement('canvas');tm.width=_G;tm.height=_G;tm.getContext('2d').putImageData(im,0,0);xM.imageSmoothingEnabled=false;xM.drawImage(tm,0,0,_S,_S);xM.strokeStyle='#fff';xM.lineWidth=3;xM.beginPath();xM.arc(ax,ay,8,0,6.28);xM.stroke();DA(xM,ax,ay,LD.vi[0],LD.vi[1],'#00ff00',140);DA(xM,ax,ay,LD.vm[0],LD.vm[1],'#d000ff',140)}
let dr=null;const EV=e=>{let r=cW.getBoundingClientRect(),x,y;if(e.touches&&e.touches.length>0){x=e.touches[0].clientX;y=e.touches[0].clientY}else{x=e.clientX;y=e.clientY}let sx=cW.width/r.width,sy=cW.height/r.height;return FS((x-r.left)*sx,(y-r.top)*sy)};
const OD=e=>{e.preventDefault();let[x,y]=EV(e);if(Math.hypot(x-W.g[0],y-W.g[1])<0.4)dr='g';else if(Math.hypot(x-W.s[0],y-W.s[1])<0.4)dr='s'};
const OM=e=>{if(!dr)return;e.preventDefault();let[x,y]=EV(e);if(dr=='g')W.g=[x,y];if(dr=='s')W.s=[x,y]};
const OU=e=>{if(e.cancelable)e.preventDefault();dr=null};
cW.addEventListener('mousedown',OD);window.addEventListener('mousemove',OM);window.addEventListener('mouseup',OU);
cW.addEventListener('touchstart',OD,{passive:false});window.addEventListener('touchmove',OM,{passive:false});window.addEventListener('touchend',OU);
function rst(){A.rs()}function tgl(){P=!P}L();
</script>
</body>
</html>
